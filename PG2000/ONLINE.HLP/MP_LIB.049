%%
1,0:1
%%
.1
    Funktionen der Multiprozessor-Library

  …ÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕª
  ∫ ACHTUNG: Da die Multiprozessor-Library AVT-Funktionen enthÑlt, kînnen     ∫
  ∫          die Funktionen dieser Library nur verwendet werden, wenn das     ∫
  ∫          Library-Runtime-Modul im nullspannungssicheren Speicher          ∫
  ∫          (Anwender-ROM) der Steuerung vorhanden ist! Das Runtime-Modul    ∫
  ∫          dieser Library ist im B&R-Modul MPSERVER.BR integriert, d.h.     ∫
  ∫          es wird mit dem MP-Server auf die Zentraleinheit Åbertragen.     ∫
  ∫          Nach dem öbertragen des Library-Runtime-Moduls in den null-      ∫
  ∫          spannungssicheren Speicher mu· ein KALTSTART (frÅher "TOTALINIT" ∫
  ∫          genannt) durchgefÅhrt werden.                                    ∫
  »ÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕº








                                     @002[ Fortsetzung ]               @999[ HILFE beenden ]
.2
    Funktionen der Multiprozessor-Library (Fortsetzung)

    Nach dem Importieren der Multiprozessor-Library stehen Ihnen folgende
    Funktionen zur VerfÅgung:

    @020[MP_ident  ] Ident-Nummer des Multiprozessors anfordern
    @030[MP_trigger] Starten der HS#2 am Multiprozessor (MP-HSTC)
    @040[MP_ready  ] PrÅfen, ob die HS#2 am Multiprozessor (MP-HSTC) bereit ist

    Diese Funktionen kînnen nur auf der Zentraleinheit verwendet werden!











                                       @200[ ANHANG ]                      @001[ öbersicht ]
.20
    MP_ident - Ident-Nummer des MPs anfordern

    @021[MP_ident] (enable,module_no,mp_ident,status)

    Parameter-Datentypen :
    ->  enable    : BIT           Der Funktionsblock wird nur ausgefÅhrt, wenn
                                  enable = 1 ist.
    ->  module_no : WORD          Moduladresse des Multiprozessors in dezimaler
                                  Form. Die Moduladresse des Multiprozessors
                                  ist nicht steckplatzabhÑngig, sondern wird
                                  durch einen Nummernschalter auf dem Modul
                                  eingestellt.
    <-  mp_ident  : LONG          Ident-Nummer des Multiprozessors. Diese
                                  Ident-Nummer wird fÅr die anderen Funktionen
                                  der Multiprozessor-Library benîtigt.
    <-  @025[status    ]: WORD          Fehlernummer (0 = kein Fehler)

    Die Funktion MP_ident() liefert die Ident-Nummer des Multiprozessors mit
    der angegebenen Moduladresse. Die Ident-Nummer des Multiprozessors (MPs)
    wird fÅr die anderen Funktionen der Multiprozessor-Library benîtigt.

                                     @021[ Fortsetzung ]                   @001[ öbersicht ]
.21
    MP_ident - Ident-Nummer des MPs anfordern (Fortsetzung)

    Die Funktion MP_ident() kann nur auf der CPU verwendet werden!
    Ein fehlerfreier Aufruf der Funktion MP_ident() ist nur mîglich, wenn
    am Multiprozessor die MP-HSTC konfiguriert ist (schlagen Sie dazu im
    Kapitel "Systemkonfiguration" des "B&R SYSTEM 2000 System-Software
    Referenzhandbuch" nach).














                                                                     @001[ öbersicht ]
.25
    MP_ident - Ident-Nummer des MPs anfordern (Fortsetzung)

    <- Parameter <status    >: WORD

    Fehlernummern der Funktion MP_ident():
    8016    Referenziertes Systemmodul (Multiprozessor) fehlt

    Eine Liste aller mîglichen Fehlermeldungen der Multiprozessor-Library
    finden Sie im Anhang @300[Fehlermeldungen].












                                      @020[ MP_ident ]                     @001[ öbersicht ]
.30
    MP_trigger - Starten der HS#2 am MP

    @031[MP_trigger] (enable,mp_ident,status)

    Parameter-Datentypen :
    ->  enable    : BIT           Der Funktionsblock wird nur ausgefÅhrt, wenn
                                  enable = 1 ist.
    ->  mp_ident  : LONG          Ident-Nummer des Multiprozessors
                                  (von @020[MP_ident]).
    <-  @035[status    ]: WORD          Fehlernummer (0 = kein Fehler)

    Mit der Funktion MP_trigger() kînnen Sie am Multiprozessor mit der ange-
    gebenen Ident-Nummer ("mp_ident") einen Interrupt auslîsen, der die MP-HSTC
    startet. Ist die MP-HSTC noch nicht bereit, wird am Ausgang "status" die
    Fehlernummer 6354 ausgegeben.
    Die Funktion MP_trigger() kann nur auf der CPU verwendet werden!
    Ein fehlerfreier Aufruf der Funktion MP_trigger() ist nur mîglich, wenn
    am Multiprozessor die MP-HSTC konfiguriert ist.



                                     @031[ Fortsetzung ]                   @001[ öbersicht ]
.31
    MP_trigger - Starten der HS#2 am MP (Fortsetzung)

    Weitere Informationen zum Thema "MP-HSTC" finden Sie im "B&R SYSTEM 2000
    System-Software Referenzhandbuch".

















                                                                     @001[ öbersicht ]
.35
    MP_trigger - Starten der HS#2 am MP (Fortsetzung)

    <- Parameter <status    >: WORD

    Fehlernummern der Funktion MP_trigger():
    6354    MP-HSTC-Zyklus noch nicht fertig
    6355    Keine MP-HSTC am MP installiert bzw. gestartet

    Eine Liste aller mîglichen Fehlermeldungen der Multiprozessor-Library
    finden Sie im Anhang @300[Fehlermeldungen].











                                     @030[ MP_trigger ]                    @001[ öbersicht ]
.40
    MP_ready - PrÅfen, ob die HS#2 am MP bereit ist

    @040[MP_ready] (enable,mp_ident,status)

    Parameter-Datentypen :
    ->  enable    : BIT           Der Funktionsblock wird nur ausgefÅhrt, wenn
                                  enable = 1 ist.
    ->  mp_ident  : LONG          Ident-Nummer des Multiprozessors
                                  (von @020[MP_ident]).
    <-  @045[status    ]: WORD          Fehlernummer (0 = kein Fehler)

    Mit der Funktion MP_ready() kînnen Sie feststellen, ob die MP-HSTC am
    Multiprozessor mit der angegebenen Ident-Nummer ("mp_ident") bereit ist,
    d.h. ob der letzte MP-HSTC-Zyklus abgeschlossen ist. Ist die MP-HSTC noch
    nicht bereit, wird am Ausgang "status" die Fehlernummer 6354 ausgegeben.
    Die Funktion MP_ready() kann nur auf der CPU verwendet werden!
    Ein fehlerfreier Aufruf der Funktion MP_ready() ist nur mîglich, wenn
    am Multiprozessor die MP-HSTC konfiguriert ist (schlagen Sie dazu im
    Kapitel "Systemkonfiguration" des "B&R SYSTEM 2000 System-Software
    Referenzhandbuch" nach).

                                                                     @001[ öbersicht ]
.45
    MP_ready - PrÅfen, ob die HS#2 am MP bereit ist (Fortsetzung)

    <- Parameter <status    >: WORD

    Fehlernummern der Funktion MP_ready():
    6354    MP-HSTC-Zyklus noch nicht fertig
    6355    Keine MP-HSTC am MP installiert bzw. gestartet

    Eine Liste aller mîglichen Fehlermeldungen der Multiprozessor-Library
    finden Sie im Anhang @300[Fehlermeldungen].











                                      @040[ MP_ready ]                     @001[ öbersicht ]
.200
    ANHANG : LIBRARY-Informationen


    @201[< Allgemeines   >]      Voraussetzungen etc.

    @250[< Syntax        >]      Syntax fÅr die ErklÑrung der Funktionen

    @300[< Fehlernummern >]      Zusammenfassung aller Fehlernummern

    @400[< History       >]      Neue FunktionalitÑten und VersionsÑnderungen











                                                                     @001[ öbersicht ]
.201
    Multiprozessor-Library : Allgemeines

    Bei Multiprozessoren (MPs) und Parallelprozessoren (PPs) kann neben einer
    Timer-HSTC auch eine eigene Multiprozessor- bzw. Parallelprozessor-HS-
    Taskklasse (kurz: MP-HSTC bzw. PP-HSTC) konfiguriert werden.
    Die MP-HSTC wird nicht durch einen Hardware-Timer, sondern Åber die
    Funktionen der Multiprozessor-Library in der Applikation der Haupt-CPU
    ausgelîst. Dadurch kînnen Teile der Applikation auf dem Multiprozessor
    (synchron zur Haupt-CPU) ausgefÅhrt werden.

    Anmerkungen:
    - Bevor Sie die Funktionen der Multiprozessor-Library in Ihrem Projekt
      verwenden kînnen, mÅssen Sie die Library in die entsprechende Projekt-
      Datenbank importieren.

    - Die Funktionen der Multiprozessor-Library kînnen nur verwendet werden,
      wenn der MP-Server (B&R-Modul MPSERVER.BR) sowohl im Anwender-ROM der
      Haupt-CPU als auch im Anwender-ROM des Multiprozessors vorhanden ist.



                                     @202[ Fortsetzung ]                   @001[ öbersicht ]
.202
    Multiprozessor-Library : Allgemeines (Fortsetzung)

    - Die MP-HSTC wird erst ab BUGFIX 5 der Betriebssystem-Version 1.10
      (B&R-Modul BUGFIX.BR mit der Versionsnummer 1.15) unterstÅtzt. D.h. die
      Funktionen der Multiprozessor-Library kînnen nur aufgerufen werden, wenn
      das Modul BUGFIX.BR mit der Versionsnummer 1.15 (oder hîher) sowohl im
      Anwender-ROM der CPU als auch im Anwender-ROM des Multiprozessors vor-
      handen ist.

    - Da die Multiprozessor-Library AVT-Funktionen enthÑlt, kînnen die Funkti-
      onen dieser Library nur verwendet werden, wenn das Library-Runtime-Modul
      im Anwender-ROM der CPU vorhanden ist. Das Runtime-Modul dieser Library
      ist im B&R-Modul MPSERVER.BR integriert, d.h. es wird mit dem MP-Server
      auf die CPU Åbertragen.

    - Alle Funktionen der Multiprozessor-Library liefern im Fehlerfall als
      Ergebnis eine @300[Fehlernummer].




                                       @200[ ANHANG ]                      @001[ öbersicht ]
.250
    Multiprozessor-Library : Syntaxbeschreibung

    Datentypen:
    FÅr viele Funktionen sind bestimmte Gruppen von Datentypen zulÑssig. Um
    bei der Funktionsbeschreibung nicht alle zulÑssigen Datentypen anfÅhren
    zu mÅssen, werden folgende Gruppenbezeichnungen eingefÅhrt:
    …ÕÕÕÕÕÕÕÕÀÕÕÕÕÕÕÕ—ÕÕÕÕÕÕÕ—ÕÕÕÕÕÕÕ—ÕÕÕÕÕÕÕ—ÕÕÕÕÕÕÕ—ÕÕÕÕÕÕÕ—ÕÕÕÕÕÕÕ—ÕÕÕÕÕÕÕª
    ∫ Gruppe ∫  BIT  ≥ INT8  ≥ BYTE  ≥ INT16 ≥ WORD  ≥ INT32 ≥ LONG  ≥ FLOAT ∫
    ÃÕÕÕÕÕÕÕÕŒÕÕÕÕÕÕÕÿÕÕÕÕÕÕÕÿÕÕÕÕÕÕÕÿÕÕÕÕÕÕÕÿÕÕÕÕÕÕÕÿÕÕÕÕÕÕÕÿÕÕÕÕÕÕÕÿÕÕÕÕÕÕÕπ
    ∫ BASIS  ∫       ≥   x   ≥   x   ≥   x   ≥   x   ≥   x   ≥   x   ≥       ∫
    «ƒƒƒƒƒƒƒƒ◊ƒƒƒƒƒƒƒ≈ƒƒƒƒƒƒƒ≈ƒƒƒƒƒƒƒ≈ƒƒƒƒƒƒƒ≈ƒƒƒƒƒƒƒ≈ƒƒƒƒƒƒƒ≈ƒƒƒƒƒƒƒ≈ƒƒƒƒƒƒƒ∂
    ∫ NICHT  ∫   x   ≥   x   ≥   x   ≥   x   ≥   x   ≥   x   ≥   x   ≥       ∫
    ∫ FLOAT  ∫       ≥       ≥       ≥       ≥       ≥       ≥       ≥       ∫
    «ƒƒƒƒƒƒƒƒ◊ƒƒƒƒƒƒƒ≈ƒƒƒƒƒƒƒ≈ƒƒƒƒƒƒƒ≈ƒƒƒƒƒƒƒ≈ƒƒƒƒƒƒƒ≈ƒƒƒƒƒƒƒ≈ƒƒƒƒƒƒƒ≈ƒƒƒƒƒƒƒ∂
    ∫ ALLE   ∫   x   ≥   x   ≥   x   ≥   x   ≥   x   ≥   x   ≥   x   ≥   x   ∫
    «ƒƒƒƒƒƒƒƒ◊ƒƒƒƒƒƒƒ≈ƒƒƒƒƒƒƒ≈ƒƒƒƒƒƒƒ≈ƒƒƒƒƒƒƒ≈ƒƒƒƒƒƒƒ≈ƒƒƒƒƒƒƒ≈ƒƒƒƒƒƒƒ≈ƒƒƒƒƒƒƒ∂
    ∫ FELD   ∫  [x]  ≥  [x]  ≥  [x]  ≥  [x]  ≥  [x]  ≥  [x]  ≥  [x]  ≥  [x]  ∫
    »ÕÕÕÕÕÕÕÕ ÕÕÕÕÕÕÕœÕÕÕÕÕÕÕœÕÕÕÕÕÕÕœÕÕÕÕÕÕÕœÕÕÕÕÕÕÕœÕÕÕÕÕÕÕœÕÕÕÕÕÕÕœÕÕÕÕÕÕÕº
      x  Datentyp ist zulÑssig
     [x] Datentyp ist zulÑssig als Feldvariable oder Zeichenkette (String)

                                     @251[ Fortsetzung ]                   @001[ öbersicht ]
.251
    Multiprozessor-Library : Syntaxbeschreibung (Fortsetzung)

    Pfeile:
    FÅr die Darstellung von Eingangs- und Ausgangsparametern werden Pfeile
    verwendet. Dabei gilt folgende Vereinbarung:
    …ÕÕÕÕÕÕÕÕÕÀÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕª
    ∫  Pfeil  ∫  Bedeutung                                                   ∫
    ÃÕÕÕÕÕÕÕÕÕŒÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕπ
    ∫   ->    ∫  Eingangsparameter                                           ∫
    «ƒƒƒƒƒƒƒƒƒ◊ƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒ∂
    ∫   <->   ∫  Ein-/Ausgangsparameter. Funktionell ist es ein Ausgangs-    ∫
    ∫         ∫  parameter. öblicherweise wird er aber vor dem Aufruf der    ∫
    ∫         ∫  Funktion mit einer bestimmten Information geladen (z.B.     ∫
    ∫         ∫  einer Adresse). Meist wird die Adresse einer Variable mit   ∫
    ∫         ∫  adr() [PL2000] oder einem Adre·kontakt [KOP] angeschlossen. ∫
    «ƒƒƒƒƒƒƒƒƒ◊ƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒ∂
    ∫   <-    ∫  Ausgangsparameter                                           ∫
    »ÕÕÕÕÕÕÕÕÕ ÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕº



                                     @252[ Fortsetzung ]                   @001[ öbersicht ]
.252
    Multiprozessor-Library : Syntaxbeschreibung (Fortsetzung)

    Funktionsblîcke:
    Funktionsblîcke sind in dieser Online-Hilfe nicht grafisch dargestellt.
    Sie finden aber alle fÅr Funktionsblîcke relevanten Informationen, wie
    Eingangsparameter (->), Ein-/Ausgangsparameter (<->) und Ausgangsparameter
    (<-) in der Online-Hilfe.














                                       @200[ ANHANG ]                      @001[ öbersicht ]
.300
    Multiprozessor-Library : Fehlernummern

    Die folgende Liste ist eine Zusammenfassung aller mîglichen Fehlermeldungen
    der Multiprozessor-Library:

    6354    MP-HSTC-Zyklus noch nicht fertig
    6355    Keine MP-HSTC am MP installiert bzw. gestartet
    8016    Referenziertes Systemmodul (Multiprozessor) fehlt













                                       @200[ ANHANG ]                      @001[ öbersicht ]
.400
    Multiprozessor-Library : History - VersionsÑnderungen

  …ÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕ—ÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕª
  ∫ V1.20           ≥                                                         ∫
  «ƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒ¡ƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒ∂
  ∫ Erste Version der Online-Hilfe fÅr die Multiprozessor-Library.            ∫
  »ÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕº














                                       @200[ ANHANG ]                      @001[ öbersicht ]

.End
